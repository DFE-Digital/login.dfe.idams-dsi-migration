jobs:
     - job: Build
       displayName: Build
       steps:
        - task: DotNetCoreCLI@2
          displayName: Build Function
          inputs:
           command: 'build'
           projects: '**/*.csproj'
           arguments: --output $(System.DefaultWorkingDirectory)/publish_output --configuration Release  
        - pwsh: |
            Copy-Item -Path $(System.DefaultWorkingDirectory)/powershell -Destination $(System.DefaultWorkingDirectory)/Publish/ -Recurse
            Get-ChildItem -Path $(System.DefaultWorkingDirectory)/Publish/powershell â€“Recurse
          displayName: Copy Powershell Files to Publish    

      
        - task: ArchiveFiles@2
          displayName: Create Archive File
          inputs:
           rootFolderOrFile: '$(System.DefaultWorkingDirectory)/publish_output'
           includeRootFolder: false
           archiveType: zip
           archiveFile: $(Build.ArtifactStagingDirectory)/$(Build.BuildId).zip
           replaceExistingArchive: true
           verbose: true

        - publish: $(Build.ArtifactStagingDirectory)
          name: publishBuildArtifact
          displayName: Publish Build Artifact
          artifact: $(Build.BuildId)